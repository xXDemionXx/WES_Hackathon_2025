# SquareLine application

This application is created by SquareLine Studio application and built for BLDK.

## About SquareLine Studio

SquareLine Studio is a visual drag-and-drop UI editor to create beautiful Graphical User Interfaces quickly and easily for embedded and desktop applications.
The application exports plain C or MicroPython code so you can use it on any platform.

It can be downloaded from this link: [Download SquareLine Studio](https://squareline.io/downloads)

SquareLine Studio can be used for free with a "Personal" licence (for which you will need to create an account on their website). It enables the user to create unlimited projects and export UI files and projects, but it limits the user to max. 5 screens, 50 widgets and it is not meant for commercial use.
For teaching purposes, exploring and for purpose of BLESA, the "Personal" licence is more than enough.

## Requirements

- Version of ESP-IDF required 5.0. or greater
- Version of LVGL used: 8.3.*
- [Downloaded SquareLine Studio](https://squareline.io/downloads) and "Personal" licence
- BLDK

## Application file structure

SquareLine application folder contains source files in its root and also a project/ subdirectory.

All source files within <u>squareline/</u> folder are generated by SquareLine, except `ui_events.c/.h` files. <b>It is recommended to modify only these files</b>.
`ui_events.h` file is modified only by deleting duplicate function declarations and to fix BL coding standard (like lv_event_t *e to lv_event_t *p_evt).
`ui_events.c` file is generated by SquareLine, but it is up to the programmer to write all function logic (for event callbacks and similar).

By changing something inside SquareLine and exporting UI files again, all user written code inside `ui_events.c/.h` is preserved and not overwritten.

For running the application, all the user needs to do is run `ui_init()` function that is generated and declared inside `ui.h` file.

### project/

This is a subdirectory where the SquareLine Studio project and all necessary files are stored. Using these files, the SquareLine Studio application project can be easily accessed and modified.

## Creating a project from scratch

1. Select an option to create a new project
1. Select the <b>Espressif</b> platform
1. Select <b>ESP WROVER KIT</b> (most likely on the bottom) - it will open project settings on the right side of the window.
1. Give your project a name
1. Select the folder in which to store project files - in our example application it is set to `esp32-gui/components/ui_app/squareline/project/`
1. Set your resolution - <b>BLDK display resolution is 240, 320 and the rotation is 90 degrees (or 320, 240)</b>
1. Set color depth to <b>16 bit swap</b> if using BLDK
1. LVGL version is 8.3.4
1. Click on <b>"Create"</b>

### Configuring project settings

1. Click on "<b>File</b>"
1. Select "<b>Project Settings</b>"
1. You can now configure project settings and update them
1. In "<b>FILE EXPORT</b>" set "<b>Project Export Root</b>" to `esp32-gui/components/ui_app/squareline/project/`
1. Set "<b>UI Files Export Path</b>" to `esp32-gui/components/ui_app/squareline/`
1. Call functions export file should be set to <b>".c"</b>
1. Apply changes

Now all project files will be saved in the project/ subdirectory and all exported files will be in the root of the squareline/ folder (like in this example).

### Creating basic application

Once you have completed the steps above, you can start creating your GUI application.

On the left side, there are all widgets you can use. You can add different arcs, buttons, calendars, checkboxes, switches, etc. Also, you can add screens (max. 5 with "Personal" licence).

The application is pretty straightforward. You click on the widget you want to add and it is added to the screen. Above, in the "<b>Hierarchy</b>" tab, you can drag components to arrange them as you wish. You can place an image inside the button, label inside the panel and so on.

By selecting a widget, you can change its properties on the right side of the window. You can even add events which will be executed when invoked.
Those events are pretty basic and limiting. For more advanced actions, you should set the action to "Call function" and type in which function to call.
That function will then be created in `ui_events.c/.h` files and you should implement it when you export files. There you can do more complex things, but you will need to do it all by writing code. You can at our example which handles changing from "Dark mode" to "Light mode" and the other way around.

You can also create animations.
To do that, press the "<b>Animations</b>" tab which is located next to "Hierarchy" and all listed components.
You can then create an animation and by selecting the component, you can add an event to it with an action "Play animation". Be careful to reverse the animation because the components stay in the state in which the animation changes them.

### Play mode

There is an option called "<b>Play mode</b>". It enables the user to simulate his UI application inside the SquareLine application and it shows how the application behaves.

To enter "<b>Play Mode</b>", press the button located above the editor (the symbol is the play button).

## Examples

[Get Started](https://www.youtube.com/watch?v=9qp3Lmc8r-Q)
[Youtube video - designing an application](https://www.youtube.com/watch?v=b_4m1A3A2yw)
